<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 4: F5 Distributed Cloud Bot Defense connector for BIG-IP</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 4: F5 Distributed Cloud Bot Defense connector for BIG-IP"/>
  <meta name="product" content="F5 Distributed Cloud"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2024-01-10 14:51:32"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Distributed Cloud" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 4: F5 Distributed Cloud Bot Defense connector for BIG-IP &#8212; F5 Distributed Cloud  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/CoveoFullSearch.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Distributed Cloud  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../class1/class1.html">F5 Distributed Cloud - Introduction to Deployment Models and Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class2/class2.html">F5 Distributed Cloud - WAF/WAAP Deeper Dive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class3/class3.html">F5 Distributed Cloud - WAF/WAAP Deeper Dive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class4/class4.html">F5 Distributed Cloud - WAF/WAAP Deeper Dive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class5/class5.html">F5 Distributed Cloud - Advanced Bot Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class6/class6.html">F5 Distributed Cloud - Intro to Multi-Cloud Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class7/class7.html">F5 Distributed Cloud - AppStack CaaS &amp; K8s Delivery Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class8/class8.html">F5 Distributed Cloud - Introduction to Deployment Models and Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../class9/class9.html">F5 Distributed Cloud - WAF Policy Supervisor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archive.html">Archived F5 Distributed Cloud Labs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../2hour/2hour.html">Two (2) Hour F5 Distributed Cloud Labs</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 4: F5 Distributed Cloud Bot Defense connector for BIG-IP</a><ul>
<li><a class="reference internal" href="#task-1-define-the-protected-application-in-f5-distributed-cloud-bot-defense">Task 1: Define the protected application in F5 Distributed Cloud Bot Defense</a></li>
<li><a class="reference internal" href="#task-2-configure-f5-bigip-distributed-cloud-bot-defense-connector-profile">Task 2: Configure F5 BIGIP Distributed Cloud Bot Defense connector profile</a></li>
<li><a class="reference internal" href="#task-3-test-and-monitor-protected-traffic">Task 3: Test and Monitor Protected Traffic</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../../index.html">F5 Distributed Cloud</a>

          <span class="right">
             <a href="../../../_sources/archive/2023/class3/lab4.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-xc">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-4-f5-distributed-cloud-bot-defense-connector-for-big-ip">
<h1>Lab 4: F5 Distributed Cloud Bot Defense connector for BIG-IP<a class="headerlink" href="#lab-4-f5-distributed-cloud-bot-defense-connector-for-big-ip" title="Permalink to this heading">¶</a></h1>
<p>This lab will focus on the deployment of Bot Defense via a Bot Defense Connector on a BIG-IP.
You will use both the F5 Distributed Cloud Console and a BIG-IP in your lab deployment to complete
this lab.</p>
<div class="section" id="task-1-define-the-protected-application-in-f5-distributed-cloud-bot-defense">
<h2>Task 1: Define the protected application in F5 Distributed Cloud Bot Defense<a class="headerlink" href="#task-1-define-the-protected-application-in-f5-distributed-cloud-bot-defense" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li>Login to your F5 Distributed Cloud tenant at <a class="reference external" href="https://f5-xc-lab-sec.console.ves.volterra.io/web/home">https://f5-xc-lab-sec.console.ves.volterra.io/web/home</a>.</li>
<li>From the Home page select the Bot Defense tile.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image1.png"><img alt="lab001" src="../../../_images/lab4-image1.png" style="width: 6.5in; height: 4.91597in;" /></a></p>
<ol class="arabic simple" start="3">
<li>From the left-hand menu select <strong>Manage &gt;&gt; Applications</strong>. Then select the “<strong>Add Application</strong>” button.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image2.png"><img alt="lab002" src="../../../_images/lab4-image2.png" style="width: 6.5in; height: 2.88264in;" /></a></p>
<ol class="arabic simple" start="4">
<li>On the Protected Application screen do the following:<ol class="loweralpha">
<li>Give the application a descriptive <strong>Name</strong> (like “f5airlines”)</li>
<li>Leave the <strong>Application Region</strong> as “US”.</li>
<li>Select “Custom” for the <strong>Connector Type</strong>.</li>
<li>Click <strong>Save and Exit</strong>.</li>
</ol>
</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image3.png"><img alt="lab003" src="../../../_images/lab4-image3.png" style="width: 6.5in; height: 3.99514in;" /></a></p>
<ol class="arabic simple" start="5">
<li>This will return you to the Applications screen. Click the ellipsis
icon on the right of your newly defined application. Here you will
find the ability to copy various values that are needed to configure
the BIGIP connector.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image4.png"><img alt="lab004" src="../../../_images/lab4-image4.png" style="width: 6.5in; height: 2.96181in;" /></a></p>
</div>
<div class="section" id="task-2-configure-f5-bigip-distributed-cloud-bot-defense-connector-profile">
<h2>Task 2: Configure F5 BIGIP Distributed Cloud Bot Defense connector profile<a class="headerlink" href="#task-2-configure-f5-bigip-distributed-cloud-bot-defense-connector-profile" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li>Select the <strong>Airline App</strong> Access Method for your F5 BIGIP in your UDF deployment.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image17.png"><img alt="lab017" src="../../../_images/lab4-image17.png" style="width: 6.5in; height: 3.26667in;" /></a></p>
<ol class="arabic simple" start="2">
<li>From this new browser tab, take note of the FQDN. You will need it
when configuring the F5 Distributed Cloud Bot Defense profile later
in this lab.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image5.png"><img alt="lab005" src="../../../_images/lab4-image5.png" style="width: 6.5in; height: 3.57778in;" /></a></p>
<ol class="arabic simple" start="3">
<li>Access the TMUI of your BIGIP 17.1. Login credentials are <strong>admin/f5xcdemo!</strong>.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image16.png"><img alt="lab016" src="../../../_images/lab4-image16.png" style="width: 6.5in; height: 3.26667in;" /></a></p>
<ol class="arabic simple" start="4">
<li>In the F5 BIGIP TMUI, browse to <strong>Distributed Cloud Services &gt; Bot  Defense &gt; BD Profiles</strong> and click the (+) icon to create a new Bot Defense profile.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image6.png"><img alt="lab006" src="../../../_images/lab4-image6.png" style="width: 4.68476in; height: 5.54063in;" /></a></p>
<ol class="arabic" start="5">
<li><p class="first">On the <strong>New BD Profile…</strong> screen edit the following settings:</p>
<p><strong>General Properties</strong></p>
<ol class="loweralpha simple">
<li>Give the BD profile a descriptive <strong>Name</strong>.</li>
</ol>
<p><strong>API Request Settings</strong></p>
<ol class="loweralpha simple" start="2">
<li>Paste into the <strong>Application ID</strong> field the value copied from F5 Distributed Cloud console.</li>
<li>Paste into the <strong>Tenant ID</strong> field the value copied from F5 Distributed Cloud console.</li>
<li>Paste into the <strong>API Key</strong> field the value copied from F5 Distributed Cloud console.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image7.png"><img alt="lab007" src="../../../_images/lab4-image7.png" style="width: 6.5in; height: 6.68194in;" /></a></p>
<p><strong>JS Insertion Configuration</strong></p>
<ol class="loweralpha simple" start="5">
<li>Select the check box to enable <strong>Inject JS in Specific URL</strong>.</li>
<li>In the <strong>JS Inject Included Paths</strong>, enter <strong>/user/signin</strong> and click <strong>Add</strong>.</li>
</ol>
<p><strong>Protected Endpoint(s) – Web</strong></p>
<ol class="loweralpha" start="7">
<li><p class="first">For <strong>Protected URIs</strong>:</p>
<ol class="lowerroman simple">
<li>In the <strong>Host</strong> field paste in the FQDN from the Airline App Access Method to you BIGIP.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>See Exercise 1 step 8. FQDN for your Airline App will be similar to 3995dde2-4cf8-4c5b-89f2-2d0717d76d5b.access.udf.f5.com.</em></p>
</div>
<ol class="lowerroman simple" start="2">
<li>Enter <strong>/user/signin</strong> into the <strong>Path</strong> field.</li>
<li>Select <strong>Block</strong> from the <strong>Mitigation Action</strong> dropdown.</li>
<li>Click <strong>Add</strong>.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image8.png"><img alt="lab008" src="../../../_images/lab4-image8.png" style="width: 6.5in; height: 3.70903in;" /></a></p>
</li>
</ol>
<p><strong>Advanced Features</strong></p>
<ol class="loweralpha simple" start="8">
<li>Select the <strong>Advanced</strong> view from the section dropdown.</li>
<li>From the <strong>Protection Pool – Web</strong> dropdown select the <strong>ibd-webus.fastcache.net</strong> pool.</li>
<li>From the <strong>SSL Profile</strong> dropdown select the <strong>serverssl</strong> profile.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image9.png"><img alt="lab009" src="../../../_images/lab4-image9.png" style="width: 6.5in; height: 4.74792in;" /></a></p>
<ol class="loweralpha simple" start="11">
<li>Choose <strong>X-Forwarded-For</strong> from the <strong>Source of Client IP Address</strong> dropdown.</li>
<li>Click <strong>Finished</strong>.</li>
</ol>
</li>
</ol>
<p>The F5 Distributed Cloud Bot Defense connector profile is now
configured. However, in order to protect the application we must assign
the BD profile to the virtual server.</p>
<ol class="arabic simple" start="6">
<li>From the F5 BIGIP TMUI, browse to <strong>Local Traffic &gt;&gt; Virtual Servers</strong>. Select the <strong>airline-backend.f5se.com</strong> virtual server.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image10.png"><img alt="lab010" src="../../../_images/lab4-image10.png" style="width: 6.5in; height: 2.74722in;" /></a></p>
<ol class="arabic simple" start="7">
<li>Select the <strong>Distributed Cloud Services</strong> tab at the top and then do the following:<ol class="loweralpha">
<li>Set <strong>Bot Defense</strong> to <strong>Enabled</strong>.</li>
<li>From the <strong>Profile</strong> dropdown, select the BD profile created in the previous step.</li>
<li>Click <strong>Update</strong>.</li>
</ol>
</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image11.png"><img alt="lab011" src="../../../_images/lab4-image11.png" style="width: 6.5in; height: 3.07083in;" /></a></p>
</div>
<div class="section" id="task-3-test-and-monitor-protected-traffic">
<h2>Task 3: Test and Monitor Protected Traffic<a class="headerlink" href="#task-3-test-and-monitor-protected-traffic" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li>Select the <strong>Airline App</strong> Access Method for your F5 BIGIP in your UDF deployment</li>
<li>Select <strong>Signin</strong> in the top left to access the F5 AIR login page.
This is the protected page configured in your F5 BIGIP Distributed
Cloud Bot Defense Profile.</li>
<li>Enter any email address and password and click <strong>Confirm</strong> to submit a login attempt.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image12.png"><img alt="lab012" src="../../../_images/lab4-image12.png" style="width: 5.87275in; height: 3.07943in;" /></a></p>
<ol class="arabic simple" start="4">
<li>Try several login attempts with your browser.</li>
<li>You can generate “attack” traffic by opening your browser’s
“Developer Tools”, selecting the Network tab, finding the POST
request to the login page, right-clicking it, and choosing “Copy as
cURL”.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image13.png"><img alt="lab013" src="../../../_images/lab4-image13.png" style="width: 5.99382in; height: 4.64393in;" /></a></p>
<p>You can then paste the copied request into a terminal/command prompt and hit <strong>Enter</strong>.</p>
<p>Repeat this several times to generate many requests.</p>
<ol class="arabic simple" start="6">
<li>Return to the <strong>F5 Distributed Cloud</strong> console and navigate to the <strong>Bot Defense</strong> service.</li>
<li>From the left-hand menu, select <strong>Overview &gt;&gt;</strong> <strong>Monitor</strong>. Change the time range to <strong>Last 1 hour</strong>.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image14.png"><img alt="lab014" src="../../../_images/lab4-image14.png" style="width: 6.5in; height: 4.46111in;" /></a></p>
<p>Here you will see a high-level overview of the traffic to your Bot Defense protected applications.</p>
<ol class="arabic simple" start="8">
<li>From the left-hand menu, select <strong>Report &gt;&gt; Traffic Analyzer</strong>.</li>
</ol>
<p><a class="reference internal" href="../../../_images/lab4-image15.png"><img alt="lab015" src="../../../_images/lab4-image15.png" style="width: 6.5in; height: 3.26667in;" /></a></p>
<p>Here you can see the most recent requests associated with your
connector-protected applications, the Traffic Type, the Automation Type,
and additional detailed information about these requests.</p>
<ol class="arabic simple" start="9">
<li>Browse to the other sections under <strong>Report</strong> in the Bot Defense
console; <strong>Bad Bot Report</strong>, <strong>Protection Coverage Report</strong>, <strong>Transaction Usage</strong>.</li>
</ol>
</div>
</div>


     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../../_static/js/index.js"></script>
  <script src="../../../_static/js/jquery.appear.js"></script>
  <script src="../../../_static/js/printThis.js"></script>
  <script src="../../../_static/js/bootstrap.min.js"></script>
  <script src="../../../_static/js/clouddocs.js"></script>
  <script src="../../../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>