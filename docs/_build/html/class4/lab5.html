<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 5: Rate Limiting</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 5: Rate Limiting"/>
  <meta name="product" content="F5 Distributed Cloud"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2023-12-21 22:15:30"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Distributed Cloud" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 5: Rate Limiting &#8212; F5 Distributed Cloud  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/CoveoFullSearch.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 6: API Discovery &amp; Protection" href="lab6.html" />
    <link rel="prev" title="Lab 4: Malicious Users" href="lab4.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Distributed Cloud  </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../class1/class1.html">F5 Distributed Cloud - Introduction to Deployment Models and Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class2/class2.html">F5 Distributed Cloud - WAF/WAAP Deeper Dive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class3/class3.html">F5 Distributed Cloud - WAF/WAAP Deeper Dive</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="class4.html">F5 Distributed Cloud - WAF/WAAP Deeper Dive</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="class4.html#welcome">Welcome</a></li>
<li class="toctree-l2"><a class="reference internal" href="class4.html#objective">Objective:</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="class4.html#lab-tasks">Lab &amp; Tasks:</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">Introduction: Accessing F5 Distributed Cloud Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab1.html">Lab 1: Deploying and Managing F5 Distributed Cloud Web Application Firewall Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab2.html">Lab 2: Reviewing Signature-based Bot Strategies and enabling F5 Distributed Cloud BotDefense</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab3.html">Lab 3: Exploring Service Policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab4.html">Lab 4: Malicious Users</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Lab 5: Rate Limiting</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab6.html">Lab 6: API Discovery &amp; Protection</a></li>
<li class="toctree-l3"><a class="reference internal" href="lab7.html">Lab 7: Client-Side Defense</a></li>
<li class="toctree-l3"><a class="reference internal" href="close.html">Conclusion</a></li>
<li class="toctree-l3"><a class="reference internal" href="close.html#appendix">Appendix</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../class5/class5.html">F5 Distributed Cloud - Advanced Bot Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class6/class6.html">F5 Distributed Cloud - Intro to Multi-Cloud Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class7/class7.html">F5 Distributed Cloud - AppStack CaaS &amp; K8s Delivery Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class8/class8.html">F5 Distributed Cloud - Introduction to Deployment Models and Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class9/class9.html">F5 Distributed Cloud - WAF Policy Supervisor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../archive/archive.html">Archived F5 Distributed Cloud Labs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../2hour/2hour.html">Two (2) Hour F5 Distributed Cloud Labs</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 5: Rate Limiting</a><ul>
<li><a class="reference internal" href="#task-1-establishing-a-baseline">Task 1: Establishing a Baseline</a></li>
<li><a class="reference internal" href="#task-2-creating-a-rate-limiting-policy">Task 2: Creating a Rate Limiting Policy</a></li>
<li><a class="reference internal" href="#task-3-testing-rate-limiting">Task 3: Testing Rate Limiting</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../index.html">F5 Distributed Cloud</a>
              &gt; <a href="class4.html">F5 Distributed Cloud - WAF/WAAP Deeper Dive</a>

          <span class="right">
             <a href="../_sources/class4/lab5.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-xc">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-5-rate-limiting">
<h1>Lab 5: Rate Limiting<a class="headerlink" href="#lab-5-rate-limiting" title="Permalink to this heading">¶</a></h1>
<p>The following lab tasks will guide you the configuration of Rate Limiting feature sets.
Rate Limiting can be used to implement a variety of L7 security controls; assisting in L7 DDoS,
protecting heavy URLs (service process impactful) or mitigating impacts to other controlled endpoints.</p>
<p><strong>Expected Lab Time: 20 minutes</strong></p>
<div class="section" id="task-1-establishing-a-baseline">
<h2>Task 1: Establishing a Baseline<a class="headerlink" href="#task-1-establishing-a-baseline" title="Permalink to this heading">¶</a></h2>
<p>In this task you will access a test website/webpage to experience access without a Rate Limiting Policy
engaged.  Following completion of Task1, you will build a Rate Limit Policy (Task2) and the test the
Rate Limited experience (Task3).</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic">
<li><p class="first">In your local web browser access the following link, replacing namespace with your own:</p>
<p><strong>http://&lt;namespace&gt;.lab-sec.f5demos.com/ratelimit.php</strong></p>
</li>
<li><p class="first">Refresh the page multiple times and notice you do not receive any errors nor blocked</p>
<p>messages. You can also open your browser’s developers to observe requests receiving 200Ks.</p>
<p>Let’s change that behavior.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0003.png"><img alt="lab000" src="../_images/lab5-0003.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="task-2-creating-a-rate-limiting-policy">
<h2>Task 2: Creating a Rate Limiting Policy<a class="headerlink" href="#task-2-creating-a-rate-limiting-policy" title="Permalink to this heading">¶</a></h2>
<p>In this task you will add a Rate Limiting Policy to the application Load Balancer previously created.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic">
<li><p class="first">Return to the <strong>Web App &amp; API Protection</strong> configuration window. In the left-hand</p>
<p>navigation, expand <strong>Manage</strong> and click <strong>Load Balancers &gt; HTTP Load Balancers</strong>.</p>
</li>
<li><p class="first">Use the <strong>Action Dots</strong> and click <strong>Manage Configuration</strong></p>
</li>
<li><p class="first">Click <strong>Edit Configuration</strong> in the top right-hand corner.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0013.png"><img alt="lab001" src="../_images/lab5-0013.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0023.png"><img alt="lab002" src="../_images/lab5-0023.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic simple" start="4">
<li>Click <strong>Common Security Controls</strong> in the left-hand navigation &amp; locate <strong>Rate Limiting</strong>.</li>
<li>Click the dropdown for <strong>Rate Limiting</strong> and select <strong>Custom Rate Limiting Parameters</strong>.</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0033.png"><img alt="lab003" src="../_images/lab5-0033.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic simple" start="6">
<li>In the expanded <strong>Custom Rate Limiting Parameters</strong> click the <strong>View Configuration</strong> Link.</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0043.png"><img alt="lab004" src="../_images/lab5-0043.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="7">
<li><p class="first">In the resulting <strong>Rate Limit Configuration</strong> window, in the <strong>Request Rate Limiter</strong></p>
<p>section set the following values as shown:</p>
<ul class="simple">
<li><strong>Number:</strong> 2</li>
<li><strong>Per Period:</strong> Minute</li>
<li><strong>Burst Multiplier:</strong> 1</li>
</ul>
</li>
<li><p class="first">Click the drop-down for <strong>Rate Limiter Policies</strong> and select <strong>Rate Limiter Policies</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0053.png"><img alt="lab005" src="../_images/lab5-0053.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="9">
<li><p class="first">In the new row for <strong>Rate Limiter Policies</strong>, click the dropdown an then select <strong>Add</strong></p>
<p><strong>Item</strong> from the list as shown.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0063.png"><img alt="lab006" src="../_images/lab5-0063.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="10">
<li><p class="first">In the <strong>Rate Limiter Policy</strong> window, enter <strong>rate-limit</strong> in the <strong>Name</strong> field in</p>
<p><strong>Metadata</strong> section and then click <strong>Configure</strong> within the <strong>Rules</strong> section.</p>
</li>
<li><p class="first">In the resulting <strong>Rules</strong> window, click <strong>Add Item</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0073.png"><img alt="lab007" src="../_images/lab5-0073.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0083.png"><img alt="lab008" src="../_images/lab5-0083.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="12">
<li><p class="first">In the <strong>Rate Limiter Policy</strong> window within the <strong>Metadata</strong> section input</p>
<p><strong>rate-limit-auth</strong> into the <strong>Name</strong> field.</p>
</li>
<li><p class="first">Using the <strong>Actions</strong> drop-down select, <strong>Apply Rate Limiter</strong>.</p>
</li>
<li><p class="first">In the left-hand navigation, click on <strong>Request Match</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0093.png"><img alt="lab009" src="../_images/lab5-0093.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="15">
<li><p class="first">In the <strong>Request Match</strong> section and select the <strong>Configure</strong> link in the <strong>HTTP Method</strong></p>
<p>section as shown.</p>
</li>
<li><p class="first">In the resulting <strong>HTTP Method</strong> window under <strong>Method List</strong>, select <strong>POST</strong> then</p>
<p>click <strong>Apply</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0103.png"><img alt="lab010" src="../_images/lab5-0103.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0113.png"><img alt="lab011" src="../_images/lab5-0113.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first arabic" start="17">
<li><p class="first">Observe that <strong>HTTP Method</strong> now appears <strong>Configured</strong>.</p>
</li>
<li><p class="first">Further down in the <strong>Request Match</strong> section, select the <strong>Configure</strong> link in the</p>
<p><strong>HTTP Path</strong> section as shown.</p>
</li>
<li><p class="first">Observe the various Path definition options, click <strong>Add Item</strong> in the <strong>Prefix Values</strong></p>
<p>section the input <strong>/auth.php</strong> as shown and then click <strong>Apply</strong>.</p>
</li>
</ol>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p><em>Although its already protect by Bot Defense, we can also control the rate at which the</em></p>
<p class="last"><em>specific authentication page can be POSTed to (or any other page).</em></p>
</div>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0123.png"><img alt="lab012" src="../_images/lab5-0123.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0133.png"><img alt="lab013" src="../_images/lab5-0133.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="20">
<li><p class="first">Observe that <strong>HTTP Path</strong> now also appears <strong>Configured</strong>. Click <strong>Apply</strong> on the</p>
<p><strong>Rate Limiter Policy</strong> window.</p>
</li>
<li><p class="first">Observe the rate limit rule just created and click <strong>Add Item</strong> to build another rule.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0143.png"><img alt="lab014" src="../_images/lab5-0143.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0153.png"><img alt="lab015" src="../_images/lab5-0153.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="22">
<li><p class="first">In the <strong>Rate Limiter Policy</strong> window within the <strong>Metadata</strong> section input</p>
<p><strong>rate-limit-page</strong> into the <strong>Name</strong> field.</p>
</li>
<li><p class="first">Using the <strong>Actions</strong> drop-down select, <strong>Apply Rate Limiter</strong>.</p>
</li>
<li><p class="first">In the left-hand navigation, click on <strong>Request Match</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0163.png"><img alt="lab016" src="../_images/lab5-0163.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="25">
<li><p class="first">In the <strong>Request Match</strong> section and select the <strong>Configure</strong> link in the <strong>HTTP Method</strong></p>
<p>section as shown.</p>
</li>
<li><p class="first">In the resulting <strong>HTTP Method</strong> window under <strong>Method List</strong>, select <strong>GET</strong> then</p>
<p>click <strong>Apply</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0173.png"><img alt="lab017" src="../_images/lab5-0173.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0183.png"><img alt="lab018" src="../_images/lab5-0183.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="27">
<li><p class="first">Observe that <strong>HTTP Method</strong> now appears <strong>Configured</strong>.</p>
</li>
<li><p class="first">Further down in the <strong>Request Match</strong> section, select the <strong>Configure</strong> link in the</p>
<p><strong>HTTP Path</strong> section as shown.</p>
</li>
<li><p class="first">Observe the various Path definition options, click <strong>Add Item</strong> in the <strong>Prefix Values</strong></p>
<p>section the input <strong>/ratelimit.php</strong> as shown and then click <strong>Apply</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0193.png"><img alt="lab019" src="../_images/lab5-0193.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0203.png"><img alt="lab020" src="../_images/lab5-0203.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="30">
<li><p class="first">Observe that <strong>HTTP Path</strong> now also appears <strong>Configured</strong>. Click <strong>Apply</strong> on the</p>
<p><strong>Rate Limiter Policy</strong> window.</p>
</li>
<li><p class="first">Observe the added rate limit rule and click <strong>Add Item</strong> to build another rule.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0213.png"><img alt="lab021" src="../_images/lab5-0213.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0223.png"><img alt="lab022" src="../_images/lab5-0223.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="32">
<li><p class="first">In the <strong>Rate Limiter Policy</strong> window within the <strong>Metadata</strong> section input</p>
<p><strong>bypass</strong> into the <strong>Name</strong> field.</p>
</li>
<li><p class="first">Using the <strong>Actions</strong> drop-down select, <strong>Bypass Rate Limiter</strong>.</p>
</li>
<li><p class="first">In the left-hand navigation, click on <strong>Request Match</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0233.png"><img alt="lab023" src="../_images/lab5-0233.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="35">
<li><p class="first">In the <strong>Request Match</strong> section and select the <strong>Configure</strong> link in the <strong>HTTP Method</strong></p>
<p>section as shown.</p>
</li>
<li><p class="first">In the resulting <strong>HTTP Method</strong> window under <strong>Method List</strong>, select <strong>ANY</strong> then</p>
<p>click <strong>Apply</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0243.png"><img alt="lab024" src="../_images/lab5-0243.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0253.png"><img alt="lab025" src="../_images/lab5-0253.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="37">
<li><p class="first">Observe that <strong>HTTP Method</strong> now appears <strong>Configured</strong>.</p>
</li>
<li><p class="first">Further down in the <strong>Request Match</strong> section, select the <strong>Configure</strong> link in the</p>
<p><strong>HTTP Path</strong> section as shown.</p>
</li>
<li><p class="first">Observe the various Path definition options, click <strong>Add Item</strong> in the <strong>Prefix Values</strong></p>
<p>section the input <strong>/</strong> as shown and then click <strong>Apply</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0263.png"><img alt="lab026" src="../_images/lab5-0263.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0273.png"><img alt="lab027" src="../_images/lab5-0273.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="40">
<li><p class="first">Observe that <strong>HTTP Path</strong> now also appears <strong>Configured</strong>. Click <strong>Apply</strong> on the</p>
<p><strong>Rate Limiter Policy</strong> window.</p>
</li>
<li><p class="first">Observe the three created rate limit rules and click <strong>Apply</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0283.png"><img alt="lab028" src="../_images/lab5-0283.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0293.png"><img alt="lab029" src="../_images/lab5-0293.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="42">
<li><p class="first">Observe that rules are now <strong>Configured</strong>. Complete the custom <strong>Rate Limiter Policy</strong> by</p>
<p>clicking <strong>Continue</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0303.png"><img alt="lab030" src="../_images/lab5-0303.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first arabic" start="43">
<li><p class="first">Observe the <strong>Request Rate Limiter</strong> options for number of requests, the Per Period</p>
<p>interval and the Burst Multiplier.</p>
</li>
<li><p class="first">Also observe that IPs can be allowed without Rate Limiting policies being applied</p>
</li>
<li><p class="first">Click <strong>Apply</strong> to add the <strong>Rate Limit Configuration</strong> to the application Load Balancer.</p>
</li>
</ol>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>Although only one policy is being added, multiple Rate Limit policies can be attached.</em></p>
</div>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0313.png"><img alt="lab031" src="../_images/lab5-0313.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic" start="46">
<li><p class="first">Observe that the <strong>Custom Rate Limiting Parameters</strong> now show <strong>Configured</strong> and then</p>
<p>click on <strong>Other Settings</strong> in the left-hand navigation.</p>
</li>
<li><p class="first">Once at the bottom of the <strong>HTTP Load Balancer</strong> configuration, click <strong>Save and Exit</strong>.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0323.png"><img alt="lab032" src="../_images/lab5-0323.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0333.png"><img alt="lab033" src="../_images/lab5-0333.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="task-3-testing-rate-limiting">
<h2>Task 3: Testing Rate Limiting<a class="headerlink" href="#task-3-testing-rate-limiting" title="Permalink to this heading">¶</a></h2>
<p>Now we will retest access to our website and see if our experience has indeed changed.</p>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first last arabic">
<li><p class="first">In your local web browser access the following link, replacing namespace with your own:</p>
<p><strong>http://&lt;namespace&gt;.lab-sec.f5demos.com/ratelimit.php</strong></p>
</li>
<li><p class="first">Refresh the page multiple times and quickly… did you experience a different result?</p>
<p>Rate Limited responses receive <strong>429</strong> response codes and block pages as shown in the</p>
<p>image below.</p>
</li>
</ol>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/lab5-0343.png"><img alt="lab034" src="../_images/lab5-0343.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><ol class="first arabic" start="3">
<li><p class="first">Rate Limited requests can also be seen in <strong>Security Events</strong> as Service Policy blocks.</p>
</li>
<li><p class="first">Review your Security Events by navigating back to the Security Dashboard to see the 429</p>
<p>blocks.</p>
</li>
</ol>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>Review Lab1/Task3 to find Security Events. You can copy you support ID to search with!</em></p>
</div>
</td>
</tr>
<tr class="row-even"><td><p class="first"><a class="reference internal" href="../_images/lab5-0353.png"><img alt="lab035" src="../_images/lab5-0353.png" style="width: 800px;" /></a></p>
<p class="last"><a class="reference internal" href="../_images/lab5-0363.png"><img alt="lab036" src="../_images/lab5-0363.png" style="width: 800px;" /></a></p>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils align-default">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><p class="first"><strong>End of Lab 5:</strong>  This concludes Lab 5, feel free to review and test the configuration.</p>
<p class="last">A Q&amp;A session will begin shortly to conclude the overall lab.</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../_images/labend9.png"><img alt="labend" src="../_images/labend9.png" style="width: 800px;" /></a></td>
</tr>
</tbody>
</table>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="lab4.html" title="Lab 4: Malicious Users" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="lab6.html" title="Lab 6: API Discovery &amp; Protection" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../_static/js/index.js"></script>
  <script src="../_static/js/jquery.appear.js"></script>
  <script src="../_static/js/printThis.js"></script>
  <script src="../_static/js/bootstrap.min.js"></script>
  <script src="../_static/js/clouddocs.js"></script>
  <script src="../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>